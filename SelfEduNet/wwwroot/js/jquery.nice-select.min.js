!function (e) {
    e.fn.niceSelect = function (t) {
        function s(t) {
            // Добавляем только стили и классы, не создавая дополнительные элементы
            t.addClass("nice-select").addClass(t.attr("class") || "").addClass(t.attr("disabled") ? "disabled" : "").attr("tabindex", t.attr("disabled") ? null : "0");

            // Устанавливаем текущее выбранное значение
            var i = t.find("option:selected");
            t.data("current", i.data("display") || i.text());
        }

        if ("string" == typeof t) return "update" == t ? this.each(function () {
            var t = e(this), n = e(this).next(".nice-select"), i = n.hasClass("open");
            n.length && (n.remove(), s(t), i && t.trigger("click"))
        }) : "destroy" == t ? (this.each(function () {
            var t = e(this);
            t.removeClass("nice-select").css("display", "");
        }), 0 == e(".nice-select").length && e(document).off(".nice_select")) : console.log('Method "' + t + '" does not exist.'), this;

        this.each(function () {
            var t = e(this);
            t.hasClass("nice-select") || s(t);
        });

        // События только для открытия/закрытия выпадающего списка и выбора
        e(document).off(".nice_select");
        e(document).on("click.nice_select", ".nice-select", function () {
            var t = e(this);
            e(".nice-select").not(t).removeClass("open");
            t.toggleClass("open");
        });

        e(document).on("click.nice_select", function (t) {
            0 === e(t.target).closest(".nice-select").length && e(".nice-select").removeClass("open");
        });

        e(document).on("keydown.nice_select", ".nice-select", function (t) {
            var s = e(this);
            if (32 == t.keyCode || 13 == t.keyCode) {
                s.hasClass("open") ? s.removeClass("open") : s.addClass("open");
                return !1;
            }
            if (27 == t.keyCode) s.hasClass("open") && s.removeClass("open");
        });

        return this;
    }
}(jQuery);
